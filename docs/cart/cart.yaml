# ROUTES
paths:
  /api/carts:
    get:
      summary: Get the user's cart.
      tags:
        - Carts
      responses:
        "200":
          description: The cart was successfully obtained.
        "400":
          description: Cart not found.
        "500":
          description: An internal server error occurred.
  /api/carts/purchase:
    post:
      summary: Make a purchase and obtain the purchase ticket.
      tags:
        - Purchases
      responses:
        "200":
          description: Purchase made successfully, ticket obtained.
        "400":
          description: Error during the purchase process.
        "500":
          description: An internal server error occurred.

  /api/carts/add-to-cart:
    post:
      summary: Add a product to the user's cart.
      tags:
        - Add to Cart
      responses:
        "200":
          description: Product successfully added to the cart.
        "400":
          description: Error when adding the product to the cart.
        "500":
          description: An internal server error occurred.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Cart"

  /api/carts/remove-from-cart:
    delete:
      summary: Remove a product from the cart.
      tags:
        - Remove from Cart
      responses:
        "200":
          description: Product successfully removed from the cart.
        "400":
          description: Error when removing the product from the cart.
        "500":
          description: An internal server error occurred.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Product"

  /api/carts/update-quantity:
    put:
      summary: Update the quantity of product units in the cart.
      tags:
        - Update Quantity
      responses:
        "200":
          description: Quantity successfully updated.
        "400":
          description: Error when updating the product quantity.
        "500":
          description: An internal server error occurred.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: "#/components/schemas/Cart"

# COMPONENTS
components:
  schemas:
    Cart:
      type: object
      properties:
        _id:
          type: string
          description: ID auto-generated by MongoDB.
        products:
          type: array
          items:
            type: object
            properties:
              productId:
                type: string
                description: ID of the product.
              quantity:
                type: number
                default: 0
      required:
        - products

    Product:
      type: object
      properties:
        _id:
          type: string
          description: ID auto-generated by MongoDB.
        title:
          type: string
          description: Title of the product.
        description:
          type: string
          description: Description of the product.
        price:
          type: number
          description: Price of the product.
        status:
          type: boolean
          description: Status of the product.
        code:
          type: string
          description: Code of the product.
        stock:
          type: number
          description: Available stock of the product.
        category:
          type: string
          description: Category of the product.
        thumbnail:
          type: array
          items:
            type: string
          description: Thumbnail images of the product.
